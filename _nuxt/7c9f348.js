(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{316:function(t,e,r){"use strict";r.r(e);r(22),r(13),r(20),r(29),r(16),r(30);var n=r(2),o=r(8),h=(r(94),r(10),r(71),r(43),r(9));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function T(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var E={data:function(){return{swipeLeft:!1,swipeRight:!1}},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n,o,h,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$content,n=t.params,o=parseInt(n.id),e.next=4,r("poeme").fetch();case 4:return h=e.sent,e.next=7,r("poeme").where({id:o}).fetch();case 7:return c=e.sent,e.abrupt("return",{displayedChapter:c[0],poeme:h});case 9:case"end":return e.stop()}}),e)})))()},computed:T(T({},Object(h.c)(["currentTimecode","currentChapter","currentLoopChapterCount","previousChapter","nextChapter","currentLine","previousLine","nextLine","playback","chapters","userTimeRequest","anchors"])),{},{secondHalfStartTime:function(){if(this.nextLine){var t=(this.nextLine.startTime-this.currentLine.startTime)/2;return this.currentLine.startTime+t}var e=(this.nextChapter.startTime-this.currentLine.startTime)/2;return this.currentLine.startTime+e},currentChapter:function(){var t=this;return this.poeme.find((function(e){return e.id===parseInt(t.$route.params.id)}))},previousChapter:function(){var t=this,e=this.anchors.indexOf(this.$route.params.id.toString())-1;return this.poeme.find((function(r){return r.id===parseInt(t.anchors[e])}))}}),watch:{currentTimecode:function(){var t=this,e=this.poeme.find((function(e){return e.id===parseInt(t.anchors[t.anchors.indexOf(t.$route.params.id.toString())+1])}));e&&this.playback&&(this.currentTimecode>e.startTime&&1===this.currentLoopChapterCount?this.gotToNextChapter():this.currentTimecode>e.startTime&&this.currentLoopChapterCount>1&&(this.UPDATE_TIME_LINES_AND_CHAPTERS(this.currentChapter.startTime),this.UPDATE_CURRENT_LOOP_CHAPTER_COUNT(this.currentLoopChapterCount-1)))}},methods:T(T(T({onSwipe:function(t){"left"===t?(this.swipeLeft=!0,this.$refs.left.classList.remove("hidden"),this.gotToNextChapter()):"right"===t&&(this.$refs.right.classList.remove("hidden"),this.gotToPreviousChapter())},gotToNextChapter:function(){var t=this,e=this.anchors.indexOf(this.$route.params.id.toString())+1;if(this.anchors[e]&&0!==e){var r=this.poeme.find((function(e){return e.id===parseInt(t.$route.params.id)}));this.UPDATE_TIME_LINES_AND_CHAPTERS(r.startTime),this.$router.push(this.anchors[e])}else this.$router.push("/")},gotToPreviousChapter:function(){var t=this;this.UPDATE_PLAYBACK(!1);var e=this.anchors.indexOf(this.$route.params.id.toString())-1;if(this.anchors[e]&&0!==e){var r=this.poeme.find((function(e){return e.id===parseInt(t.$route.params.id)}));this.UPDATE_TIME_LINES_AND_CHAPTERS(r.startTime),this.$router.push(this.anchors[e])}else this.$router.push("/")}},Object(h.b)(["UPDATE_TIME_LINES_AND_CHAPTERS"])),Object(h.d)(["UPDATE_CURRENT_LOOP_CHAPTER_COUNT","UPDATE_CURRENT_LINE","UPDATE_NEXT_LINE","UPDATE_PREVIOUS_LINE","UPDATE_TIMECODE","UPDATE_PLAYBACK","UPDATE_USER_TIME_REQUEST","SET_POEME"])),{},{handleTime:function(t){switch(t.srcKey){case"left":this.UPADTE_TIME_LINES_AND_CHAPTERS(this.previousLine.startTime);break;case"right":this.UPADTE_TIME_LINES_AND_CHAPTERS(this.nextLine.startTime);break;case"up":this.UPADTE_TIME_LINES_AND_CHAPTERS(this.previousChapter.startTime);break;case"down":this.UPADTE_TIME_LINES_AND_CHAPTERS(this.nextChapter.startTime)}}}),created:function(){this.SET_POEME(this.poeme)},mounted:function(){this.UPDATE_TIME_LINES_AND_CHAPTERS(this.currentChapter.startTime),this.nextRunningChapterStart=this.nextChapter.startTime,this.UPDATE_CURRENT_LINE(this.currentChapter.vers[0]),this.UPDATE_NEXT_LINE(this.currentChapter.vers[1]),this.previousChapter&&this.UPDATE_PREVIOUS_LINE(this.previousChapter.vers[this.previousChapter.vers.length-1]),this.UPDATE_TIMECODE(this.currentChapter.vers[0].startTime),this.UPDATE_USER_TIME_REQUEST(this.currentChapter.vers[0].startTime)}},d=r(3),component=Object(d.a)(E,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("Video",{attrs:{time:t.userTimeRequest}}),t._v(" "),r("Vers",{directives:[{name:"touch",rawName:"v-touch:swipe",value:t.onSwipe,expression:"onSwipe",arg:"swipe"}],attrs:{chapter:t.displayedChapter,currentLine:t.currentLine,currentTimecode:t.currentTimecode,secondHalfStartTime:t.secondHalfStartTime,userTimeRequest:t.userTimeRequest,playback:t.playback}}),t._v(" "),r("Drawer",{attrs:{chapters:t.chapters}}),t._v(" "),r("DefinitionPanel"),t._v(" "),r("PlaybackControl",{staticClass:"d-print-none",attrs:{time:t.userTimeRequest}}),t._v(" "),r("div",{ref:"left",staticClass:"absolute left-50 top-0\n  w-1/2 hidden"},[r("svg",{staticClass:"text-gray-200",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[r("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"}})])]),t._v(" "),r("div",{ref:"right",staticClass:"absolute left-0 top-0\n  w-1/2 h-screen hidden"},[r("svg",{staticClass:"text-gray-200",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[r("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"}})])])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Video:r(136).default,Vers:r(135).default,Drawer:r(132).default,DefinitionPanel:r(131).default,PlaybackControl:r(133).default})}}]);